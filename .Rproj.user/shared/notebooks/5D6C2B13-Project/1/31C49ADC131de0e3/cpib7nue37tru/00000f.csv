"0","library(dplyr) "
"0","library(sf)    "
"2","Warning: package ‘sf’ was built under R version 4.3.3"
"2","Linking to GEOS 3.11.2, GDAL 3.8.2, PROJ 9.3.1; sf_use_s2() is TRUE
"
"0","library(leaflet) "
"2","Warning: package ‘leaflet’ was built under R version 4.3.3"
"0","# Filter data based on IDs"
"0","filtered_new_data <- filtered_data %>%"
"0","  filter(ZdCId %in% result$ID_REFA_LDA)"
"0",""
"0","# Convert to spatial object"
"0","final_data_sf <- st_as_sf(filtered_new_data, coords = c(""ZdAXEpsg2154"", ""ZdAYEpsg2154""), crs = 2154)"
"0",""
"0","# Transform to EPSG 4326"
"0","final_data_sf <- st_transform(final_data_sf, 4326)"
"0",""
"0","# Extract coordinates"
"0","filtered_new_data$X <- st_coordinates(final_data_sf)[, ""X""]"
"0","filtered_new_data$Y <- st_coordinates(final_data_sf)[, ""Y""]"
"0",""
"0","# Create leaflet map"
"0","my_map <- leaflet() %>%"
"0","  addTiles() %>%"
"0","  setView("
"0","    lng = mean(st_coordinates(final_data_sf$geometry)[, ""X""]),"
"0","    lat = mean(st_coordinates(final_data_sf$geometry)[, ""Y""]),"
"0","    zoom = 11"
"0","  ) %>%"
"0","  addMarkers("
"0","    data = filtered_new_data,"
"0","    lng = ~X,  # Use the X column for longitude"
"0","    lat = ~Y   # Use the Y column for latitude"
"0","  )"
"0",""
"0","# Show the map"
"0","my_map"
